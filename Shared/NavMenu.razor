@using System.Collections.Generic
@using Cdc.EpiInfo.Models

<ul 
    id="slide-out" 
    class="sidenav sidenav-fixed @SidebarCollapseCssClass " 
    style="margin-top: 56px; margin-left: -16px; z-index: -1;">

    @foreach (var item in MenuItems)
    {
        @if (item.Type == MenuItemType.Link) 
        {
            <li><a class="waves-effect" href="#!"><i class="material-icons">@item.Icon</i>@item.Name</a></li>
        }
        else if (item.Type == MenuItemType.Divider)
        {
            <li><div class="divider"></div></li>
        }
        else if (item.Type == MenuItemType.Header)
        {
            <li><a class="subheader">@item.Name</a></li>
        }
    }
</ul>

<nav>
    <div class="nav-wrapper white">

        <button 
            type="button"
            onclick=@ToggleSidebar
            class="btn-flat btn-floating btn-small waves-effect waves-light white" 
            style="margin-top: -12px; margin-left: 12px;">
            <i class="material-icons black-text">menu</i>
        </button>

        <a href="#" class="brand-logo">
            <img src="images/epiinfo.ico" height="32" width="32" alt="Epi Info Icon" style="margin-left: 5px; margin-top: 16px; margin-right: 8px; float: left;" />
            Epi Info Dashboard
        </a>
    </div>
</nav>

@functions {
    bool isShowingSidebar = true;

    public string SidebarCollapseCssClass = "";

    async void ToggleSidebar() 
    {
        isShowingSidebar = !isShowingSidebar;

        if (isShowingSidebar)
        {
            SidebarCollapseCssClass = "sidebar-show-slide";
        }
        else
        {
            SidebarCollapseCssClass = "sidebar-collapse-slide";
        }

        base.StateHasChanged();
        
        //Countdown.Start();
        // Console.WriteLine(SidebarCollapseCssClass);
    }

    public List<MenuItem> MenuItems { get; set; } = new List<MenuItem>() 
    {
        new MenuItem() 
        {
            Name = "Dashboard",
            Icon = "home",
            Type = MenuItemType.Link
        },
        new MenuItem() 
        {
            Name = "New Project",
            Icon = "add_box",
            Type = MenuItemType.Link
        },
        new MenuItem() 
        {
            Name = "Add Data",
            Icon = "dvr",
            Type = MenuItemType.Link
        },
        new MenuItem() 
        {
            Name = "Open Project",
            Icon = "folder",
            Type = MenuItemType.Link
        },
        new MenuItem() 
        {
            Name = "Save Project As ...",
            Icon = "save",
            Type = MenuItemType.Link
        },
        new MenuItem() 
        {
            Name = "Export Project",
            Icon = "vertical_align_bottom",
            Type = MenuItemType.Link
        },
        new MenuItem() 
        {
            Name = "Import Project",
            Icon = "vertical_align_top",
            Type = MenuItemType.Link
        },
        new MenuItem() 
        {
            Type = MenuItemType.Divider
        },

        new MenuItem() 
        {
            Name = "Gadgets",
            Type = MenuItemType.Header
        },

        new MenuItem() 
        {
            Name = "Analysis",
            Icon = "poll",
            Type = MenuItemType.Link
        },
        new MenuItem() 
        {
            Name = "Visualization",
            Icon = "bar_chart",
            Type = MenuItemType.Link
        },
        new MenuItem() 
        {
            Name = "Reporting",
            Icon = "ballot",
            Type = MenuItemType.Link
        },
    };
    
}